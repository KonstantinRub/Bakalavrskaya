Министерство образования и науки Российской Федерации
Федеральное государственное бюджетное образовательное учреждение
высшего профессионального образования
"ПЕТРОЗАВОДСКИЙ ГОСУДАРСТВЕННЫЙ УНИВЕРСИТЕТ"
(ПетрГУ)
Физико-технический факультет
Кафедра электроники и электроэнергетики


САПР ЭЛЕКТРОННЫХ СХЕМ. СИСТЕМА KICAD
(Курсовая работа)
Электроэнергетика и электротехника (электропривод и автоматика)
Внесём некоторые изменения
и ещё изменения 
и ещё немного

Выполнил:
Студент 3 курса
Физико-технического 
Факультета, гр.21319
Рубахин Константин Владимирович

Научный руководитель:
старший преподаватель КЭиЭ
Приходченко Роман Викторович


Петрозаводск 2015     
Содержание
Введение .....................................................................................................3
1. Теоретическая часть...............................................................................4
    1.1  История САПР.................................................................................5
2. Практическая часть................................................................................6
Заключение................................................................................................20
Список источников...................................................................................21





















Введение
В наше время сравнительно хорошо развита электроника. Заканчивается тот период когда все составляющие приборов можно было починить довольно быстро при наличии нужных компонентов. Прогресс не стоит на месте и вместе с ним развивается электроника. Она становится более исполнительней, более удобной и ёмкой. Вместе с этим все элементы уменьшаются в размерах, примером могут служить  многие аппараты которые мы используем в повседневном быту. Некоторые элементы стали настолько маленькими и сложными в устройстве что для изготовления таких деталей, их проектирования и установки требуются специальные программы. О таких программах и пойдёт речь в данной курсовой работе.
Цели работы: определить возможность использования программного продукта KiCad для проектирования печатной платы.
Для реализации цели были поставлены следующие задачи:
1)	Изучить программный продукт KiCad.
2)	Разработать схему печатной платы мультивибратора в KiCad.
3)	По возможности создать натуральный вариант платы мультивибратора.










1. Теоретическая часть 
САПР - это системы автоматизированного проектирования. Их создали специально для того чтобы более просто было в будущем создавать однотипные и какие либо новые схемы. Эти системы имеют широкий спектр применения. Они используются как инженерами новичками, так и ведущими разработчиками. 
"Составными структурными частями САПР являются подсистемы, обладающие всеми свойствами систем и создаваемые как самостоятельные системы. Каждая подсистема - это выделенная по некоторым признакам часть САПР, обеспечивающая выполнение некоторых функционально-законченных последовательностей проектных задач с получением соответствующих проектных решений и проектных документов. По назначению подсистемы САПР разделяют на два вида: проектирующие и обслуживающие.
"	Обслуживающие подсистемы - объектно-независимые подсистемы, реализующие функции, общие для подсистем или САПР в целом: обеспечивают функционирование проектирующих подсистем, оформление, передачу и вывод данных, сопровождение программного обеспечения и т. п., их совокупность называют системной средой (или оболочкой) САПР.
"	Проектирующие подсистемы - объектно-ориентированные подсистемы, реализующие определенный этап проектирования или группу связанных проектных задач. В зависимости от отношения к объекту проектирования, делятся на:
"	Объектные - выполняющие проектные процедуры и операции, непосредственно связанные с конкретным типом объектов проектирования.
"	Инвариантные - выполняющие унифицированные проектные процедуры и операции, имеющие смысл для многих типов объектов проектирования.
Примерами проектирующих подсистем могут служить подсистемы геометрического трехмерного моделирования механических объектов, схемотехнического анализа, трассировки соединений в печатных платах.
Типичными обслуживающими подсистемами являются:
"	подсистемы управления проектными данными
"	обучающие подсистемы для освоения пользователями технологий, реализованных в САПР
"	подсистемы графического ввода-вывода
"	система управления базами данных (СУБД)." [1]
Также автоматизация проектирования электронных устройств это комплекс программных средств для облегчения разработки электронных устройств, создания микросхем и печатных плат. "Комплекс позволяет создать принципиальную электрическую схему проектируемого устройства с помощью графического интерфейса, создавать и модифицировать базу радиоэлектронных компонентов, проверять целостность сигналов на ней. Современные программные пакеты позволяют выполнить автоматическую расстановку элементов, и автоматически развести дорожки на чертеже многослойной печатной платы, соединяя тем самым выводы радиоэлектронных компонентов в соответствии с принципиальной схемой. Введённая схема непосредственно или через промежуточный файл связей ("netlist") может быть преобразована в заготовку проектируемой печатной платы, с различной степенью автоматизации." [2]
Системы автоматизации проектирования электроники могут иметь возможность моделирования разрабатываемого устройства и исследования его работы до того, как оно будет воплощено в аппаратуру. Причём моделирование может быть как с технической точки зрения (поведение сигнала в схеме) так и с графической (3d изображение платы).
Для проектирования используется специальное программное обеспечение. На данный момент существует уже множество вариантов этого программного обеспечения, и есть возможность выбрать то, которое больше нравится. Среди существующих САПР есть самые известные и можно сказать самостоятельные проекты такие как gEda и KiCad. Есть менее известные, например SPICE. А также существуют любительские сборки. Все эти системы могут сопровождаться различными утилитами. Например Resistor, Puff и другие. 




1.1. История САПР
"Появление САПР может быть отнесено к концу 1950-х годов, когда исследователи Массачусетского технологического института (М. ТИ) начали работу над системой SAGE (видеотерминал на основе ЭЛТ). В начале 1960-х годов в таких системах начали использоваться для управления графопостроителем при выводе двумерных изображений технических чертежей автоматизированные средства, подобные командам системы APT. Плодотворная работа в МТИ (1963 г.) послужила толчком к развитию интерактивной машинной графики, что позволило в свою очередь использовать видеотерминалы на основе ЭЛТ вместо чертежной доски.
В 60-х годах в САПР появилась возможность создавать совершенные модели трехмерных объектов. В дополнение к этому развитие полупроводниковой технологии сделало мини-ЭВМ доступными для использования в САПР. В 1970-х годах было разработано программное обеспечение для моделирования трехмерных монолитных объектов, цветной полутоновой графики и др.; успехи в создании полупроводниковых ЗУ для микропроцессоров сделали ЭВМ и графические терминалы более мощными и существенно увеличили их возможности. Прикладное программное обеспечение для инженерного анализа также стало составной частью САПР. В это же время произошел переход от использования простых средств автоматической подготовки чертежей к системам автоматизированного проектирования.
В восьмидесятые годы резко возрос интерес к использованию САПР. В будущем можно ожидать появления более мощного программного обеспечения рабочих станций. В САПР становится возможным синтез реальных изображений, доступны совершенное программное обеспечение для проведения проектирования и интегрированные программные средства для создания единого непрерывного процесса на основе процессов проектирования и производства." [6]







2.Практическая часть
В курсовой работе предложено обучение по САПР на примере KiCad. Для этой работы используются всевозможные источники список которых предложен в конце. Для начала устанавливается программа KiCad. Так как на данный момент она до сих пор улучшается и пополняется, то существует несколько версий этой программы. На официальном сайте разработчиков (www.kicad-pcb.org) выбирается та версия которая больше нравится. На выбор идёт стандартная (стабильная) и версия "с надстройками". Протестированы обе версии и обе полностью рабочие, хотя с небольшими отличиями в оформлении. Установочный процесс не отличается от того типа, когда устанавливается любая другая программа. Всё интуитивно и понятно. Как один из плюсов этого САПР можно отметить малый объём памяти на жёстком диске, который занимает программа. После установки, если поискать в корневом каталоге, можно найти файл с обучением на различных языках, в том числе и на русском. Именно из него узнается довольно приличная часть информации о самом KiCad и как в нём работать. Переходим к изучению программы.
При открытии программного обеспечения (далее п.о.) появляется её основной экран, откуда происходит перемещение в нужные пользователю места. 
 
Рис. 1 Системная строка.
По большому счёту меню программы состоит из трех основных областей. Во-первых это область, представленная на рис. 1, она не отличается ничем характерным от строки в стандартных офисных программах. А ниже, на рисунке, представлены кнопки дублирующие часть команд, которые можно найти в системной строке.
 
Рис. 2 Панель доступа к подсистемам.
Во-вторых это область, которая изображена на рис.2, и в большинстве случаев начинающие пользователи скорее всего будут пользоваться лишь половиной этих подсистем.

 
Рис.3 Дерево проекта.
И в третьих это "дерево" проекта. В нём отображаются все те файлы, которые уже входят в проект и дается информация, чего не хватает в случае если программа выдаст какую либо ошибку. Теперь, когда произошло малое знакомство с основным экраном, создается свой проект платы с нуля, и происходит оценка на сколько удобен этот САПР, конечная оценка представлена заключением. Для создания проекта есть три способа. Первый это нажать на кнопку которая находится под меню файл. Второй это зайти в меню Файл-New Project-New Project. И третий это воспользоваться комбинацией горячих клавиш Ctrl+N. После нажатия предлагается окно куда сохранить проект, иными словами где будет находиться папка со всеми данными по нашей работе. В этом же окне нужно ввести как будет называться проект. (Рис.4)
 
Рис. 4 Окно сохранения проекта.
После этого выдается окно подтверждения, и пользователь подтверждает что хочет создать проект с данным именем и в данном месте. В этом месте стоит отметить что версии KiCad здесь имеют различия, в плане где сохранять проект. Лучше пользоваться более новой версией этого САПР по следующей причине. В стабильной, как написано на сайте разработчиков, версии программы идёт путь сохранения по умолчанию в корневую папку, также как и в более поздних. Но в новых версиях нет проблем найти эту папку с проектом даже начинающему пользователю. А в "стабильной" версии папка с проектом видна только через программу и никак более, не помогает даже функция отображения всех скрытых папок (если использовать Windows), при сохранении в корневую папку программы. И отчасти этот факт замедлил работу по изучению САПР. После создания проекта рекомендуется проверить существование этой папки проекта через терминал или проводник. В противном случае, если произведется сохранение в стабильной версии KiCad в корневую папку и  продолжится работа, может оказаться что вашу работу нельзя передать на носитель, так как папка не будет находиться через терминал или проводник. Если всё получилось то переходят к следующему этапу. Начинается работа с первой подсистемой, которая называется Eeschema. её изображение приведено на Рис. 2, и она расположена самой первой. При наведение курсора на эту кнопку будет написано её название, для подсказки. После нажатия нужно будет ещё раз подтвердить создания файла схемы. Так как уже упоминалось ранее про обучающие  файлы, есть смысл остановиться на основных элементах, которые будут использоваться для создания схемы. 
    Рис. 5 Левая панель в редакторе Eeschema.
На рис. 5 изображена панель которая не будет использоваться, так как все настройки которые на ней поставлены вполне устраивают. И те подробности которые на ней можно выставить не сильно влияют на работу при создании и редактировании легких плат. Это графическая составляющая данной подсистемы. Исключением является выбор размерности, в миллиметрах или в дюймах.
На рис. 6 изображена основная панель этой подсистемы. При создании небольшой схемы пользуются 3-4 функциями, если не требуется довести будущую плату "до блеска". Для достижения целей в этой работе необходимо было рассмотреть несколько функций подсистемы относящихся к этому блоку. Все эти функции расписаны на рис. 6.
 	
Рис. 6 Правая панель редактора схем. [4]

 
Рис. 7 Головное меню редактора Eeschema.
Третья панель находиться в верхней части окна программы. Она очень опциональна т.е. имеет довольно много функций различного назначения и изображена на рис. 7. Часть из которых говорит сама за себя и стандартна для различных редакторов (например такие функции как поворот, отменить действие и zoom). Другие функции будут рассмотрены позже, когда параллельно будет создаваться сама схема и дело дойдет до этих инструментов.
О других подсистемах мы расскажем более подробно в ходе работы.
В нашей работе происходит создание простенькой схемы мультивибратора для того чтобы на практике научиться пользоваться программой. По имеющемуся опыту с предыдущих курсов обучения, п.о. на подобие САПР относительно легко можно освоить, так как алгоритм работы имеет в разных случаях одинаковую последовательность действий. Для начала выбирается элемент "размещение компонента" и щёлкается на рабочую область. появляется такое окно (Рис. 8), в котором выбирается необходимый элемент. 
 
Рис. 8 Добавление компонента.
Основные радиоэлементы названы в программе просто, например сопротивление "R", конденсатор "С". Более сложные элементы находятся в соответствующих категориях, которые представлены в этом окне. После того как все необходимые компоненты добавлены их можно развернуть. Для этого можно воспользоваться горячей клавишей "R" или через контекстное меню, которое вызывается правой кнопкой мыши. Следующее что делается это соединяются уже имеющиеся компоненты. Выбирается на правой панели редактора схем инструмент "Place wire" и соединяются все имеющиеся компоненты в последовательности которая задается пользователем.
У каждого компонента есть свои параметры. При добавлении на рабочую площадь элемента все параметры нужно вводить вручную. Для этого выбирается на правой панели редактора снова иконка в виде курсора и дважды производится щёлчок по элементу. Например для элемента сопротивления выводится такое окно (Рис.9):
 
Рис. 9 Свойства компонента.
В данном окне выбирается обозначение компонента, т.е. его порядковый номер среди подобных компонентов. Значение компонента, это его номинал. Посадочное место задается через специальный инструмент и поле заполняется позже. Если пользователь имеет очень богатый опыт работы с данным САПР, то он скорее всего уже знает наизусть практически все посадочные места. Или во всяком случае самые часто используемые им в практике.
 Для каждого из вышеперечисленных данных о компоненте справа предлагается ряд функций. Они заключаются в том чтобы уточнить у пользователя где будут делаться подписи, как они будут выглядеть и будут ли вообще выведены (галочка "показать"). Данная операция проводится для всех компонентов.
Перед тем как приступать к следующему этапу необходимо проверить нет ли ошибок в схеме на предмет соединения между другими элементами. Для этого используется функцию "Perform electrical rules check". Эта функция расположена в головной панели окна подсистемы. При её запуске нам выдается такое окно (Рис.10):
 
Рис. 10 ERC.
Для проверки нажимается кнопка "Run". Если при её нажатии ничего не происходит то всё сделано правильно и все выводы всех элементов цепи соединены. Если же ошибки есть, то они будут подсвечены стрелками на схеме и прописаны в этом окне.
В результате работы с этой подсистемой KiCad получилась вот такая схема (рис. 11):
 
Рис. 11 Мультивибратор в Eeschema.
Чтобы работать с этой схемой в других подсистемах создают список цепей или Net list. Для этого в головной панели нажимается иконка "Сформировать список цепей". После нажатия появляется специальное окно (рис. 12):
 
Рис. 12 Формирование списка цепей.
Сверху представлены четыре вкладки. В них можно выбрать в каком редакторе в будущем можно открыть данный список цепей. Для KiCad это Pcbnew. Чтобы подтвердить нажимают кнопку "Generate". По умолчанию этот список сохраняется также в папку с проектом. Если у каких либо добавленных компонентов не будут заданы параметры то эта часть программы задаст стандартные значения для всех нередактированых компонентов.
После добавления всех необходимых элементов, редактирования их параметров (как графических, так и рабочих), проверки ERC (Electrical rules check) и создания списка цепей, необходимо задать всем компонентам их посадочные места. Конечно если это было сделано одновременно с редактированием параметров компонента, то этот пункт можно пропустить. Начинающие пользователи будут задавать посадочные места вручную. Для этого в головной панели запускается элемент CvPcb (рис 13).
 
Рис.13 Редактор посадочных мест.
В средней части программы перечислены все элементы которые присутствуют на схеме, а в правой список посадочных мест. В верхней чести окна можно сделать выборку по "ключевым словам", "числу выводов" и "библиотекам". Если в предложенных посадочных местах нет подходящего то его можно создать самому, либо отключить выборку и поискать подходящее посадочное место в других категориях. Чтобы узнать подходит то или иное место для вашего компонента его можно посмотреть нажав на иконку с лупой. После того как всем элементам присвоены их посадочные места необходимо закрепить проделанную работу нажав иконку сохранения. Также на рис. 13 представлен список посадочных мест используемый для создания мультивибратора, который будет конечной целью работы.
После сохранения закрывается окно этого редактора, сохраняется ещё раз вся проделанная работа в Eeschema, и закрывается сама подсистема.
Снова перед пользователем главное меню KiCad.
Следующим пунктом создания схемы открывают ещё одну подсистему которая называется Pcbnew. Первое что делается в этой подсистеме это считывание списка цепей который был создан в предыдущей подсистеме. Для считывания используется соответствующая кнопка, которая имеет такую же иконку как в Eeschema, но имеет обратный смысл. Путь поиска списка цепей по умолчанию начинается с корневой папки. В появившемся окне требуется подтвердить что вы желаете считать выбранный список. Далее необходимо разблокировать все компоненты, чтобы их можно было перемещать (рис. 14).
 
Рис. 14 Режим работы с перемещением компонентов.
После нажатия на эту иконку пользователь входит в режим работы с перемещением компонентов. Чтобы разблокировать все модули необходимо войти в специальный режим через иконку на рис. 14. После щёлкнуть на свободном поле правой кнопкой мыши и в контекстном меню "Global Spread and Place" выбрать пункт разблокировать все модули. После чего выходят из режима перемещения элементов. Для перемещения посадочных мест используют несколько способов. Первый способ заключается в выделении нужных элементов мышкой и перемещением их сразу по несколько штук. Второй способ это нажать на посадочное место правой кнопкой мышки и выбрать пункт переместить посадочное место. И третий способ с помощью горячей клавиши "M". Также как в подсистеме Eeschema есть возможность развернуть элементы той же горячей клавишей "R". В отличие от редактора схем в Cvpcb лучше расположить посадочные места так, чтобы было удобнее вести дорожки. Перед тем как рисовать дорожки нужно зайти в системной строке в меню "Настройки правил" и выбрать "Правила проектирования". Откроется следующее окно (рис. 15):
Рекомендуется выставить ширину дорожки 0,8мм или больше, чтобы во время пайки платы не возникло проблем с дорожками. Соответственно и зазор между дорожками нужно будет увеличить. Если оставить стандартную ширину дорожки то схему будет неудобно переводить на фольгированый текстолит. В этом же окне нужно будет подобрать диаметр переходного отверстия, чтобы после того как плата будет "протравлена" и нужно будет сверлить отверстия площади меди было достаточно и паять элементы было проще.  
 
Рис. 15 Правка правил проектирования
Когда все элементы выставлены и правила проектирования выставлены пользователем, можно строить дорожки. Для этого нажимается иконка в правой области подсистемы "добавить дорожки". В качестве подсказки программа сама соединяет белыми линиями выводы элементов в той последовательности в какой они были соединены в Eeschema. Для проекта мультивибратора получилась вот такая схема (рис. 16):
После завершения постройки схемы в этой подсистеме делается относительно универсальный способ вывода графической части проекта из KiCad в другие редакторы векторных изображений. В системной строке выбирают меню "Файл", подменю "Экспорт SVG". После выбора появляется окно (рис. 17): 
Нет смысла печатать "в цвете" если используется простая однослойная схема. Также в слоях выбирается только "B.cu" (обратная сторона меди) опять же для однослойной схемы. Снова предлагается путь сохранения файлов с чертежами. После выбора всего что нужно, нажимают кнопку "Чертить". Полученные файлы открываются во многих редакторах изображений. 
 
Рис. 16 Мультивибратор.
Перед печатью необходимо развернуть изображение зеркально либо в меню "Экспорт SVG" либо в редакторе векторной графики, а также проверить что все изображения были сделаны с масштабом 1:1. На этом часть разработки платы заканчивается и идёт уже практическая часть уже вне KiCad.


 
Рис. 17 SVG. 









Заключение
В текущей курсовой работе было разобрано САПР на примере KiСad. Были рассмотрены моменты как с нуля разработать плату и вывести её на печать. К сожалению не все элементы этой программы были рассмотрены и использовались для создания простой схемы. В результате по данным разработки была сделана плата (рис. 18).
 
Рис. 18 Готовый мультивибратор.








Список источников
1) Система автоматизированного проектирования [Электронный ресурс] Википедия https://ru.wikipedia.org/wiki/%D1%E8%F1%F2%E5%EC%E0_%E0%E2%F2%EE%EC%E0%F2%E8%E7%E8%F0%EE%E2%E0%ED%ED%EE%E3%EE_%EF%F0%EE%E5%EA%F2%E8%F0%EE%E2%E0%ED%E8%FF 
2) Автоматизация проектирования электроники [Электронный ресурс] Википедия https://ru.m.wikipedia.org/wiki/Автоматизация_проектирования_электроники          
3) Проектирование печатных плат с помощью KiCad EDA [Электронный ресурс] 
http://www.youtube.com/watch?v=_vhNUlYRQ9k          
4) "Kicad Tutorial" из корневого каталога программы          
5) Понимаем мультивибратор [Электронный ресурс]
 http://radiokot.ru/start/analog/practice/04/      
6) История САПР [Электронный ресурс] 
http://msd.com.ua/chelovecheskij-faktor/istoriya-razvitiya-sapr/
